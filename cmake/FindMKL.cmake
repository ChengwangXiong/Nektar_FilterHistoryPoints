
FIND_PATH(MKL_INCLUDE_DIR mkl_cblas.h /usr/include 
				      /usr/local/include
				      /opt/intel/mkl/8.1.1/include)

#Todo - dynamic detection and switching for 32 and 64 bit.
GET_FILENAME_COMPONENT(MKL_LIB_PATH ${MKL_INCLUDE_DIR}/../lib/32 ABSOLUTE)

FIND_LIBRARY( MKL_LAPACK NAMES mkl_lapack PATHS ${MKL_LIB_PATH} )
FIND_LIBRARY( MKL NAMES mkl_ia32 PATHS ${MKL_LIB_PATH} )
FIND_LIBRARY( MKL_GUIDE NAMES guide PATHS ${MKL_LIB_PATH} )

SET( MKL_BLAS_INCLUDE_FILE ${MKL_INCLUDE_DIR}/mkl_blas.h )
SET( MKL_LAPACK_INCLUDE_FILE ${MKL_INCLUDE_DIR}/mkl_lapack.h )

IF (MKL_INCLUDE_DIR)
  SET(MKL_FOUND ON)
ENDIF (MKL_INCLUDE_DIR)

IF (MKL_FOUND)
  IF (NOT MKL_FIND_QUIETLY)
     MESSAGE(STATUS "Found MKL: ${MKL_INCLUDE_DIR}")
  ENDIF (NOT MKL_FIND_QUIETLY)
ELSE(MKL_FOUND)
  IF (MKL_FIND_REQUIRED)
     MESSAGE(FATAL_ERROR "Could not find MKL")
  ENDIF (MKL_FIND_REQUIRED)
ENDIF (MKL_FOUND)
